# Production environment template
# Copy to .env.production and fill in all values.

# Core
ENVIRONMENT=production
LOG_LEVEL=info
HTTP_PORT=8080

# Public domains for TLS (Caddy)
CLUBHOUSE_APP_DOMAIN=clubhouse.example.com
CLUBHOUSE_GRAFANA_DOMAIN=grafana.example.com
ACME_EMAIL=admin@example.com

# WebSocket origin allowlist (comma-separated hosts or origins)
WS_ORIGIN_ALLOWLIST=https://clubhouse.example.com

# Images (optional overrides)
# BACKEND_IMAGE=ghcr.io/your-org/clubhouse-backend:2026-01-22
# FRONTEND_IMAGE=ghcr.io/your-org/clubhouse-frontend:2026-01-22

# PostgreSQL
POSTGRES_USER=clubhouse
POSTGRES_PASSWORD=__REPLACE_WITH_STRONG_PASSWORD__
POSTGRES_DB=clubhouse

# Redis
REDIS_PASSWORD=__REPLACE_WITH_STRONG_PASSWORD__

# Bootstrap admin (only used when no admin exists)
CLUBHOUSE_BOOTSTRAP_ADMIN_USERNAME=
CLUBHOUSE_BOOTSTRAP_ADMIN_PASSWORD=
CLUBHOUSE_BOOTSTRAP_ADMIN_EMAIL=

# Proxy (optional, comma-separated IPs/CIDRs)
TRUSTED_PROXY_IPS=

# Auth rate limiting
AUTH_RATE_LIMIT_IP_MAX=5
AUTH_RATE_LIMIT_IP_WINDOW=1m
AUTH_RATE_LIMIT_IDENTIFIER_MAX=10
AUTH_RATE_LIMIT_IDENTIFIER_WINDOW=1m
AUTH_FAILED_LOGIN_THRESHOLD=5
AUTH_FAILED_LOGIN_WINDOW=30m
AUTH_FAILED_LOGIN_BASE_LOCKOUT=30s
AUTH_FAILED_LOGIN_MAX_LOCKOUT=15m

# Grafana
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=__REPLACE_WITH_STRONG_PASSWORD__
GF_SERVER_ROOT_URL=https://grafana.example.com
GF_SERVER_SERVE_FROM_SUB_PATH=false

# OpenTelemetry
OTEL_SERVICE_NAME=clubhouse
OTEL_SERVICE_VERSION=0.1.0
OTEL_EXPORTER_OTLP_ENDPOINT=tempo:4317
OTEL_EXPORTER_OTLP_INSECURE=true
OTEL_EXPORTER_OTLP_LOGS_ENDPOINT=http://loki:3100/otlp/v1/logs
OTEL_EXPORTER_OTLP_LOGS_INSECURE=true

# Backup settings (used by scripts/backup-postgres.sh)
BACKUP_DIR=/var/backups/clubhouse
BACKUP_RETENTION_DAYS=7
