steps:
  - label: ":go: Backend format & lint"
    key: backend-lint
    command: "bash -c 'if [ -f scripts/buildkite/backend-lint.sh ]; then bash scripts/buildkite/backend-lint.sh; elif [ -f .buildkite/scripts/backend-lint.sh ]; then bash .buildkite/scripts/backend-lint.sh; else echo \"Missing backend-lint script\"; ls -la; exit 1; fi'"
    plugins:
      - docker#v5.12.0:
          image: "golang:1.24"
          mount-checkout: true
          workdir: /workdir

  - label: ":go: Backend tests & build"
    key: backend-test
    command: "bash -c 'if [ -f scripts/buildkite/backend-test.sh ]; then bash scripts/buildkite/backend-test.sh; elif [ -f .buildkite/scripts/backend-test.sh ]; then bash .buildkite/scripts/backend-test.sh; else echo \"Missing backend-test script\"; ls -la; exit 1; fi'"
    plugins:
      - docker#v5.12.0:
          image: "golang:1.24"
          mount-checkout: true
          workdir: /workdir

  - label: ":node: Frontend lint, check & test"
    key: frontend
    command: "bash -c 'if [ -f scripts/buildkite/frontend-checks.sh ]; then bash scripts/buildkite/frontend-checks.sh; elif [ -f .buildkite/scripts/frontend-checks.sh ]; then bash .buildkite/scripts/frontend-checks.sh; else echo \"Missing frontend-checks script\"; ls -la; exit 1; fi'"
    plugins:
      - docker#v5.12.0:
          image: "node:20-bullseye"
          mount-checkout: true
          workdir: /workdir
